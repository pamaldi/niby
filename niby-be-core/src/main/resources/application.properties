quarkus.http.port=8080
quarkus.application.name=niby-be

# Enable Swagger UI in all environments
quarkus.swagger-ui.always-include=true

quarkus.langchain4j.chat-model.provider=anthropic

# (Opzionale) Limita solo a niby-ui
quarkus.http.cors.origins=http://localhost:8081

# (Opzionale) Metodi ammessi
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS

# (Opzionale) Headers ammessi
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with

# Enable WebSocket CORS for cross-origin connections
quarkus.websockets-next.server.cors.origins=http://localhost:8081

quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# File logging configuration
quarkus.log.file.path=logs/niby-be.log
quarkus.log.file.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n
quarkus.log.file.rotation.max-backup-index=5

# Set log level for WebSocket class to see INFO and DEBUG messages
quarkus.log.category."cloud.isaura.niby".level=DEBUG

# Enable detailed LangChain4j logging
quarkus.log.category."dev.langchain4j".level=DEBUG
quarkus.log.category."io.quarkiverse.langchain4j".level=DEBUG

# Use custom embedding model producer
quarkus.langchain4j.embedding-model.provider=dev.langchain4j.model.embedding.onnx.allminilml6v2.AllMiniLmL6V2EmbeddingModel

quarkus.langchain4j.anthropic.chat-model.model-name=claude-sonnet-4-5-20250929
quarkus.langchain4j.anthropic.api-key=${ANTHROPIC_API_KEY}
quarkus.langchain4j.anthropic.log-requests=true
quarkus.langchain4j.anthropic.log-responses=true
quarkus.langchain4j.anthropic.timeout=60s

quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${QUARKUS_DATASOURCE_USERNAME:postgres}
quarkus.datasource.password=${QUARKUS_DATASOURCE_PASSWORD:postgres}

quarkus.datasource.jdbc.url=${QUARKUS_DATASOURCE_JDBC_URL:jdbc:postgresql://localhost:5432/postgres}
quarkus.datasource.jdbc.max-size=16

# PGVector configuration (384 dimensions for AllMiniLmL6V2)
quarkus.langchain4j.pgvector.dimension=${PGVECTOR_DIMENSION:384}
quarkus.langchain4j.pgvector.table=${PGVECTOR_TABLE:niby.nifi_doc_embeddings}

# Chat memory configuration - use in-memory store for WebSocket sessions
quarkus.langchain4j.in-memory-chat-memory-store.enabled=true
